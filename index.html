<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>血圧測定・心電図貼り付け・ポジショニング 音声ガイド</title>
<style>
body{font-family:system-ui,-apple-system,"Hiragino Sans",sans-serif;margin:18px;line-height:1.45;}
h1{font-size:26px;margin:0 0 8px 0;}
.note{font-size:12px;color:#666;margin:0 0 16px 0;}
.panel{border:1px solid #e6e6e6;border-radius:14px;padding:14px;max-width:980px;}
.row{display:flex;gap:10px;align-items:center;flex-wrap:wrap;}
.tag{display:inline-block;font-size:12px;color:#666;background:#f5f5f5;border:1px solid #e6e6e6;border-radius:999px;padding:4px 10px;}
select{font-size:16px;padding:10px 12px;min-width:320px;flex:1;border-radius:10px;border:1px solid #dcdcdc;}
.navbtn{font-size:16px;padding:10px 14px;border:1px solid #dcdcdc;background:#fff;border-radius:10px;min-width:70px;}
.navbtn:disabled{opacity:.35;}
.label{font-size:12px;color:#666;margin-top:14px;}
.jp{font-size:22px;font-weight:800;margin:6px 0 14px 0;}
.en{font-size:18px;margin:6px 0 0 0;}
.controls{display:flex;gap:10px;flex-wrap:wrap;margin:10px 0 8px 0;}
.btn{font-size:16px;padding:10px 14px;border:1px solid #dcdcdc;background:#fff;border-radius:12px;min-width:150px;}
.status{font-size:12px;color:#666;margin:6px 0 6px 0;}
audio{width:100%;margin-top:6px;}
.hint{font-size:12px;color:#666;margin-top:8px;}
</style>
</head>
<body>
<h1>血圧測定・心電図貼り付け・ポジショニング 音声ガイド</h1>
<p class="note">※ 必ず GitHub Pages のURLで開いてください。iPhoneでは自動再生できないため、下の再生ボタンを押してください。</p>
<div class="panel">
<div class="row">
<span class="tag">ステップ選択</span>
<select id="stepSelect"><option value="01">01. まず血圧を測ってから、胸に心電図を付けます。</option>
<option value="02">02. 血圧を測りますね。</option>
<option value="03">03. 左腕を横に伸ばしてください。</option>
<option value="04">04. 右腕を横に伸ばしてください。</option>
<option value="05">05. 胸に心電図を付けますね。</option>
<option value="06">06. 女性スタッフが胸に心電図を付けますね。</option>
<option value="07">07. 検査中は息止めを数回お願いし、1回約10秒です。</option>
<option value="08">08. 息を止めたら体を動かさないでください。</option>
<option value="09">09. 体が動くと心臓の画像がきれいに撮れないことがあります。</option>
<option value="10">10. では一緒に練習しましょう。</option>
<option value="11">11. 大きく息を吸って、止めてください。</option>
<option value="12">12. 楽にしてください。</option>
<option value="13">13. 今と同じように、本番でも息止めをしてください。</option>
<option value="14">14. 息止めのタイミングが少し遅いです。できればもう少し早めに息を吸って止めてください。</option>
<option value="15">15. 合図が聞こえたらすぐに大きく息を吸って止めてください。</option>
<option value="16">16. 両腕を頭の上に上げてください。</option>
<option value="17">17. 点滴の入っている側の肘は、できるだけまっすぐにしてください。</option>
<option value="18">18. 動かないように胸とお腹にクッションを当て、背中側でベルトで固定しますね。</option>
<option value="19">19. 大きく息を吸って、吐いて、止めてください。</option>
<option value="20">20. 楽にしてください。</option>
<option value="21">21. きつくないですか？</option>
<option value="22">22. 安全のためにベルトを付けますね。</option>
<option value="23">23. まず造影剤なしで撮影します。</option>
<option value="24">24. これからベッドが動きます。動かないでください。</option>
<option value="25">25. それでは検査を始めます。</option></select>
<button class="navbtn" id="prevBtn">← 前</button>
<button class="navbtn" id="nextBtn">次 →</button>
</div>
<div class="label">日本語（内容）</div>
<div class="jp" id="jpText"></div>
<div class="label">English (Script)</div>
<div class="en" id="enText"></div>
<div class="controls">
<button class="btn" id="playBtn">▶︎ 再生 / Play</button>
<button class="btn" id="pauseBtn">⏸ 一時停止 / Pause</button>
<button class="btn" id="replayBtn">↻ もう一度 / Replay</button>
</div>
<div class="status" id="status">待機中 / Ready</div>
<audio id="player" controls playsinline preload="none"></audio>
<div class="hint">再生できない場合は、消音モード・音量・Bluetooth接続をご確認ください。</div>
</div>
<script>
const STEPS=[{"id": "01", "jp": "まず血圧を測ってから、胸に心電図を付けます。", "en": "First, I'll check your blood pressure, then I'll put on the ECG on your chest.", "audio": "audio/step_01.m4a"}, {"id": "02", "jp": "血圧を測りますね。", "en": "I'll take your blood pressure.", "audio": "audio/step_02.m4a"}, {"id": "03", "jp": "左腕を横に伸ばしてください。", "en": "Please extend your left arm to the side.", "audio": "audio/step_03.m4a"}, {"id": "04", "jp": "右腕を横に伸ばしてください。", "en": "Please extend your right arm to the side.", "audio": "audio/step_04.m4a"}, {"id": "05", "jp": "胸に心電図を付けますね。", "en": "I'll put the ECG on your chest.", "audio": "audio/step_05.m4a"}, {"id": "06", "jp": "女性スタッフが胸に心電図を付けますね。", "en": "A female staff member will put the ECG on your chest.", "audio": "audio/step_06.m4a"}, {"id": "07", "jp": "検査中は息止めを数回お願いし、1回約10秒です。", "en": "You will be asked to hold your breath several times during the scan, each time for about 10 seconds.", "audio": "audio/step_07.m4a"}, {"id": "08", "jp": "息を止めたら体を動かさないでください。", "en": "After you hold your breath, please try not to move your body.", "audio": "audio/step_08.m4a"}, {"id": "09", "jp": "体が動くと心臓の画像がきれいに撮れないことがあります。", "en": "If you move your body during the scan, we may not be able to get clear images of your heart.", "audio": "audio/step_09.m4a"}, {"id": "10", "jp": "では一緒に練習しましょう。", "en": "Let's try it together now.", "audio": "audio/step_10.m4a"}, {"id": "11", "jp": "大きく息を吸って、止めてください。", "en": "Take a deep breath and hold it.", "audio": "audio/step_11.m4a"}, {"id": "12", "jp": "楽にしてください。", "en": "You can relax now.", "audio": "audio/step_12.m4a"}, {"id": "13", "jp": "今と同じように、本番でも息止めをしてください。", "en": "As you did just now, please hold your breath the same way during the actual scan.", "audio": "audio/step_13.m4a"}, {"id": "14", "jp": "息止めのタイミングが少し遅いです。できればもう少し早めに息を吸って止めてください。", "en": "You're holding your breath just a little late. If possible, please try to take a deep breath and hold it a little earlier.", "audio": "audio/step_14.m4a"}, {"id": "15", "jp": "合図が聞こえたらすぐに大きく息を吸って止めてください。", "en": "When you hear the instruction, please take a deep breath and hold it right away. If you wait until the end, it may be too late for the scan.", "audio": "audio/step_15.m4a"}, {"id": "16", "jp": "両腕を頭の上に上げてください。", "en": "Please raise your arms above your head.", "audio": "audio/step_16.m4a"}, {"id": "17", "jp": "点滴の入っている側の肘は、できるだけまっすぐにしてください。", "en": "Please try to keep the elbow straight on the side with the IV.", "audio": "audio/step_17.m4a"}, {"id": "18", "jp": "動かないように胸とお腹にクッションを当て、背中側でベルトで固定しますね。", "en": "I'll put cushions on your chest and stomach to help you stay still and fasten them with belts behind your back.", "audio": "audio/step_18.m4a"}, {"id": "19", "jp": "大きく息を吸って、吐いて、止めてください。", "en": "Take a deep breath, breathe out, and hold it", "audio": "audio/step_19.m4a"}, {"id": "20", "jp": "楽にしてください。", "en": "You can relax.", "audio": "audio/step_20.m4a"}, {"id": "21", "jp": "きつくないですか？", "en": "Is it too tight for you?", "audio": "audio/step_21.m4a"}, {"id": "22", "jp": "安全のためにベルトを付けますね。", "en": "I'll put the belt around you for your safety.", "audio": "audio/step_22.m4a"}, {"id": "23", "jp": "まず造影剤なしで撮影します。", "en": "First, we'll take some images without a contrast dye.", "audio": "audio/step_23.m4a"}, {"id": "24", "jp": "これからベッドが動きます。動かないでください。", "en": "The bed will move now, please stay still.", "audio": "audio/step_24.m4a"}, {"id": "25", "jp": "それでは検査を始めます。", "en": "Now, we'll start the test.", "audio": "audio/step_25.m4a"}];
const sel=document.getElementById('stepSelect');
const jpEl=document.getElementById('jpText');
const enEl=document.getElementById('enText');
const player=document.getElementById('player');
const statusEl=document.getElementById('status');
const prevBtn=document.getElementById('prevBtn');
const nextBtn=document.getElementById('nextBtn');
function setStatus(s){statusEl.textContent=s;}
function idx(){return STEPS.findIndex(s=>s.id===sel.value);}
function load(i){
 if(i<0)i=0;if(i>=STEPS.length)i=STEPS.length-1;
 const s=STEPS[i];
 sel.value=s.id;
 jpEl.textContent=s.jp||"";
 enEl.textContent=s.en||"";
 player.src=s.audio;
 player.currentTime=0;
 setStatus("待機中 / Ready");
 prevBtn.disabled=(i===0);
 nextBtn.disabled=(i===STEPS.length-1);
}
sel.addEventListener('change',()=>load(idx()));
prevBtn.onclick=()=>load(idx()-1);
nextBtn.onclick=()=>load(idx()+1);
document.getElementById('playBtn').onclick=async()=>{try{await player.play();}catch(e){alert("再生できませんでした。");}};
document.getElementById('pauseBtn').onclick=()=>player.pause();
document.getElementById('replayBtn').onclick=async()=>{player.currentTime=0;try{await player.play();}catch(e){}};
player.onplay=()=>setStatus("再生中 / Playing");
player.onpause=()=>setStatus("一時停止 / Paused");
player.onended=()=>setStatus("待機中 / Ready");
load(0);
</script>
</body>
</html>
